<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Better Than Great - A Digital Solutions Agency</title>
		<link rel="stylesheet" type="text/css" href="css/reset.css">
		<link rel="stylesheet" type="text/css" href="css/screen.css">

		<script type="text/javascript" src="//use.typekit.net/wzs7hse.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

		<style>

			#comingSoon {
				position: absolute;
				top: 35%; 
				right: 0; left: 0;
				text-align: center;
				margin: 0 auto;

				width: 80%;
				max-width: 420px;

				background: BLACK;
			}

			#comingSoon h1 {
				line-height: 2em;
			}

			#comingSoon a {
				color: rgb(11, 96, 107);
				text-decoration: none;
			}

			#comingSoon a:hover {
				text-decoration: underline;
			}

			#comingSoon q {
				display: inline-block;
				margin: 5px auto;
			}

		</style>

	</head>

	<body onload="pageLoadHandler()" style="margin: 0; overflow: hidden;">

		<div id="comingSoon">
			<h1>Coming Soon!</h1>

			<p>Better Than Great is a product development shop specializing in building for the web. We're still getting things sorted out here, but we'd still love to hear from you! Drop us a line at <a href="mailto:me@jordanforeman.com">me@jordanforeman.com</a></p>

			<q><img src="http://www.gravatar.com/avatar/c5c2bf91367bd7a36cd7a936e137eab4.png?s=25" style="border-radius: 50%;vertical-align: middle;"> Jordan Foreman - Founder and CEO</q>
		</div>

		<canvas id="myCanvas" height="100" width="100">
		</canvas>

		<script type="text/javascript">

			var app = {
				canvas : null,
				context : null,
				particleColor : null,
				particles : [],
				emitters : [],
				maxParticles : 800,
				emissionRate : 5,
			};

			var pageLoadHandler = function(){
				app.canvas = document.getElementById("myCanvas");
				app.canvas.height = window.innerHeight;
				app.canvas.width = window.innerWidth;

				start();
			};

			var start = function(){
				app.context = app.canvas.getContext("2d");

				app.particleColor = new RGB(0, 100, 150);

				var emitCenter = new Vector(app.canvas.width / 2, app.canvas.height / 2);

				var initialEmitter = new Emitter(emitCenter, Vector.fromAngle(0, 2), 360);
				app.emitters.push(initialEmitter);

				window.requestAnimationFrame(animateFrame);
			};

			var animateFrame = function(){

				clear();
				update();
				draw();
				queue();

			};

			var clear = function(){
				app.context.clearRect(0, 0, app.canvas.width, app.canvas.height);
			};

			var update = function(){

				var h = app.canvas.height,
					w = app.canvas.width;

				// Reset backdrop
				app.context.fillStyle = "rgb(0,0,0)";
				app.context.fillRect(0, 0, w, h);

				addNewParticles();
				plotParticles(w, h);

			};

			var draw = function(){
				drawParticles();
			};

			var queue = function(){
				window.requestAnimationFrame(animateFrame);
			};

			/*
			Generates new particles (based on emitters) if we don't have too many
			*/
			var addNewParticles = function(){
				var maxParticles = app.maxParticles,
					emissionRate = app.emissionRate;

				if (app.particles.length > maxParticles) return;

				for (var i = 0; i < app.emitters.length; i++) 
				{	
					for (var j = 0; j < emissionRate; j++) 
					{
						app.particles.push(app.emitters[i].emitParticle());
					}
				}
			};

			/*
			Removes particles that are outside of bounds and moves those that we want to keep
			*/
			var plotParticles = function(boundsX, boundsY) {

				var currentParticles = [];

				for (var i = 0; i < app.particles.length; i++)
				{
					var particle = app.particles[i],
						pos = particle.position;

					if (pos.x < 0 || pos.x > boundsX ||
						pos.y < 0 || pos.y > boundsY)
						continue;

					particle.move();
					currentParticles.push(particle);
				}

				app.particles = currentParticles;

			};

			/*
			Loops through and draws all of our current on-screen particles
			*/
			var drawParticles = function(){
				var particleSize = 1;

				app.particleColor.increment();
				app.context.fillStyle = app.particleColor.toString();

				for (var i = 0; i < app.particles.length; i++)
				{
					var position = app.particles[i].position;
					app.context.fillRect(position.x, position.y, particleSize, particleSize);

					// app.context.arc(position.x, position.y, particleSize, 0, 2 * Math.PI, false);
					app.context.fill();
				}
			};

			/**
			
			Classes
			
			**/

			// VECTOR.js
			var Vector = function(x, y) {
				this.x = x || 0;
				this.y = y || 0;
			};

			// Add a vector to another
			Vector.prototype.add = function(vector) {
				this.x += vector.x;
				this.y += vector.y;
			}

			// Gets the length of the vector
			Vector.prototype.getMagnitude = function () {
				return Math.sqrt(this.x * this.x + this.y * this.y);
			};

			// Gets the angle accounting for the quadrant we're in
			Vector.prototype.getAngle = function () {
				return Math.atan2(this.y,this.x);
			};

			// Allows us to get a new vector from angle and magnitude
			Vector.fromAngle = function (angle, magnitude) {
				return new Vector(magnitude * Math.cos(angle), magnitude * Math.sin(angle));
			};

			// Creates a new vector based on an input vector
			Vector.prototype.clone = function() {
				return new Vector(this.x, this.y);
			};

			// RGB.js
			var RGB = function(r, g, b) {
				this.r = r || 0;
				this.g = g || 0;
				this.b = b || 0;
			};

			RGB.prototype.toString = function(){
				return "rgb(" + this.r + "," + this.g + "," + this.b + ")";
			};

			RGB.prototype.increment = function(){
				this.r = this.r < 255 ? this.r + 1 : 0;
				this.g = this.g < 255 ? this.g + 1 : 0;
				this.b = this.b < 255 ? this.b + 1 : 0;
			}

			// PARTICLE.js
			var Particle = function(point, velocity, acceleration) {
				this.position = point || new Vector(0, 0);
				this.velocity = velocity || new Vector(0, 0);
				this.acceleration = acceleration || new Vector(0, 0);
			};

			Particle.prototype.move = function() {
				// Add our current acceleartion to our current velocity
				this.velocity.add(this.acceleration);

				// Add our current velocity to our position
				this.position.add(this.velocity);
			};

			// EMITTER.js
			var Emitter = function(point, velocity, spread){
				this.position = point; // Vector
				this.velocity = velocity; // Vector
				this.spread = spread || Math.PI / 32; //Possible angles = velocity +/- spread
				this.drawColor = "#999";
			};

			Emitter.prototype.emitParticle = function(){
				// Use an angle randomized over the spread so we have more of a "spray"
				var angle = this.velocity.getAngle() + this.spread - (Math.random() * this.spread * 2);

				// The magnitude of the emitter's velocity
				var magnitude = this.velocity.getMagnitude();

				// The emitter's position
				var position = this.position.clone();//new Vector(this.position.x, this.position.y);

				// New velocity based off of the calculated angle and magnitude
				var velocity = Vector.fromAngle(angle, magnitude);

				// return new particle!
				return new Particle(position, velocity);
			}; 

		</script>

	</body>

</html>
